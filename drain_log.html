<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Surgical Drain Output Log</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: The application is designed as a single-page dashboard for maximum efficiency. The user is immediately presented with three key components: 1) An input form for quick data entry. 2) A dynamic line chart for visualizing output trends over time. 3) A detailed data table for reviewing all historical entries. This structure was chosen because it supports the primary user tasks of logging new data and monitoring progress without navigating away from a central view. The flow is simple: enter data, and see the visualization and log update instantly, providing immediate feedback and a comprehensive overview at all times. -->
    <!-- Visualization & Content Choices: Report Info: Tracking drain output (date, time, volume). Goal: Inform, track change, and allow data entry. Viz/Presentation Method: 1) Data Entry: A semantic HTML <form> for clarity and accessibility. 2) Trend: A Chart.js line chart to visualize volume changes over time, as it's the most effective method for time-series data. 3) Data Log: A standard HTML <table> to provide detailed, sortable raw data. Interaction: The form submission dynamically updates both the chart and the table in real-time using vanilla JavaScript. Chart tooltips provide specific data on hover. Justification: This combination provides a complete solution for data entry, quick visual analysis, and detailed review, all within one interactive view. Library/Method: Chart.js (Canvas), Tailwind CSS, Vanilla JS. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            background-color: #fdfbf7;
            font-family: 'Inter', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 40vh;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .table-container {
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
     <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="text-gray-800">

    <div class="container mx-auto p-4 md:p-8">
        
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900">Surgical Drain Output Log</h1>
            <p class="text-lg text-gray-600 mt-2">Patient: Sigrith</p>
        </header>

        <main class="space-y-12">

            <!-- Data Entry Section -->
            <section id="data-entry" class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
                <h2 class="text-2xl font-semibold mb-4 text-gray-800">Add New Reading</h2>
                <p class="text-gray-600 mb-6">
                    Use this form to add a new drain output measurement. Enter the date, time, and the total volume collected in milliliters (ml). The chart and data log below will update automatically once you add the entry.
                </p>
                <form id="reading-form" class="grid grid-cols-1 md:grid-cols-4 gap-4 items-end">
                    <div>
                        <label for="date" class="block text-sm font-medium text-gray-700">Date</label>
                        <input type="date" id="date" name="date" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2">
                    </div>
                    <div>
                        <label for="time" class="block text-sm font-medium text-gray-700">Time</label>
                        <input type="time" id="time" name="time" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2">
                    </div>
                    <div>
                        <label for="volume" class="block text-sm font-medium text-gray-700">Volume (ml)</label>
                        <input type="number" id="volume" name="volume" required min="0" placeholder="e.g., 50" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2">
                    </div>
                    <button type="submit" class="w-full md:w-auto bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-md transition duration-300 ease-in-out transform hover:-translate-y-0.5 shadow-sm">
                        Add Entry
                    </button>
                </form>
            </section>

            <!-- Data Visualization Section -->
            <section id="visualization" class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
                <h2 class="text-2xl font-semibold mb-4 text-gray-800">Output Volume Trend</h2>
                 <p class="text-gray-600 mb-6">
                    This chart shows the volume of drain output over time. It helps visualize trends, such as whether the output is generally increasing, decreasing, or staying consistent. Hover over any point on the line to see the specific volume and date for that reading.
                </p>
                <div class="chart-container">
                    <canvas id="outputChart"></canvas>
                </div>
            </section>

            <!-- Data Log Section -->
            <section id="data-log" class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
                 <h2 class="text-2xl font-semibold mb-4 text-gray-800">Historical Data Log</h2>
                 <p class="text-gray-600 mb-6">
                    Here is a complete list of all recorded drain output measurements, with the most recent entries appearing at the top. You can review the specific date, time, and volume for every entry you have logged.
                </p>
                <div class="table-container border border-gray-200 rounded-lg">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Time</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Volume (ml)</th>
                            </tr>
                        </thead>
                        <tbody id="log-table-body" class="bg-white divide-y divide-gray-200">
                            <!-- JS will populate this -->
                        </tbody>
                    </table>
                </div>
            </section>
        </main>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const initialData = [
                { date: '2025-06-03', time: '20:19', volume: 47 }
            ];

            let readings = [...initialData];

            const form = document.getElementById('reading-form');
            const tableBody = document.getElementById('log-table-body');
            const ctx = document.getElementById('outputChart').getContext('2d');

            let chart;

            const updateTable = () => {
                tableBody.innerHTML = '';
                const sortedReadings = [...readings].sort((a, b) => new Date(b.date + 'T' + b.time) - new Date(a.date + 'T' + a.time));
                
                if (sortedReadings.length === 0) {
                     tableBody.innerHTML = '<tr><td colspan="3" class="text-center py-4 text-gray-500">No data logged yet.</td></tr>';
                     return;
                }

                sortedReadings.forEach(reading => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${new Date(reading.date + 'T00:00:00').toLocaleDateString(undefined, { year: 'numeric', month: 'long', day: 'numeric' })}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${reading.time}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium">${reading.volume} ml</td>
                    `;
                    tableBody.appendChild(row);
                });
            };

            const updateChart = () => {
                const sortedReadings = [...readings].sort((a, b) => new Date(a.date + 'T' + a.time) - new Date(b.date + 'T' + b.time));
                
                const labels = sortedReadings.map(r => `${new Date(r.date + 'T00:00:00').toLocaleDateString()} ${r.time}`);
                const data = sortedReadings.map(r => r.volume);

                if (chart) {
                    chart.data.labels = labels;
                    chart.data.datasets[0].data = data;
                    chart.update();
                } else {
                    chart = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: labels,
                            datasets: [{
                                label: 'Volume (ml)',
                                data: data,
                                fill: true,
                                backgroundColor: 'rgba(79, 70, 229, 0.1)',
                                borderColor: 'rgba(79, 70, 229, 1)',
                                tension: 0.1,
                                pointBackgroundColor: 'rgba(79, 70, 229, 1)',
                                pointHoverRadius: 7,
                                pointHitRadius: 10,
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    title: {
                                        display: true,
                                        text: 'Volume (ml)'
                                    }
                                },
                                x: {
                                   title: {
                                        display: true,
                                        text: 'Date & Time'
                                    }
                                }
                            },
                            plugins: {
                                legend: {
                                    display: false
                                },
                                tooltip: {
                                    callbacks: {
                                        title: function(context) {
                                            return context[0].label.replace(',', ' at');
                                        }
                                    }
                                }
                            }
                        }
                    });
                }
            };
            
            const addReading = (event) => {
                event.preventDefault();
                const date = document.getElementById('date').value;
                const time = document.getElementById('time').value;
                const volume = parseFloat(document.getElementById('volume').value);

                if (!date || !time || isNaN(volume)) {
                    alert('Please fill in all fields correctly.');
                    return;
                }

                readings.push({ date, time, volume });

                updateTable();
                updateChart();
                form.reset();
                
                const today = new Date();
                const yyyy = today.getFullYear();
                let mm = today.getMonth() + 1;
                let dd = today.getDate();
                if (dd < 10) dd = '0' + dd;
                if (mm < 10) mm = '0' + mm;
                const formattedToday = yyyy + '-' + mm + '-' + dd;
                document.getElementById('date').value = formattedToday;

            };
            
            form.addEventListener('submit', addReading);
            
            const today = new Date();
            const yyyy = today.getFullYear();
            let mm = today.getMonth() + 1;
            let dd = today.getDate();
            if (dd < 10) dd = '0' + dd;
            if (mm < 10) mm = '0' + mm;
            const formattedToday = yyyy + '-' + mm + '-' + dd;
            document.getElementById('date').value = formattedToday;


            updateTable();
            updateChart();
        });
    </script>
</body>
</html>
